#!/usr/bin/env bash
# Portal-aware xdg-open - requests host to open URL via xdg-desktop-portal
set -euo pipefail

[[ -z "${1:-}" ]] && { echo "Usage: xdg-open <url>" >&2; exit 1; }

gdbus call --session \
    --dest org.freedesktop.portal.Desktop \
    --object-path /org/freedesktop/portal/desktop \
    --method org.freedesktop.portal.OpenURI.OpenURI \
    "" "$1" "{}" >/dev/null
